<!DOCTYPE html>
<!-- Three Rules of Blogging on The Internet
1. Make a site that you wish existed
2. Never complain or have a "how the blog is made" post
3. Post on a schedule 
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

  <title>Oil Refineries Around The World</title>
  <meta name="description" content="I was testing d3js, GEOjson and some javascript code which I found interesting and wanted to share">

  <!-- Twitter Card data -->
  <meta name="twitter:card" value="summary">

  <!-- Open Graph data -->
  <meta property="og:title" content="Oil Refineries Around The World" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://pucula.com/oil-refineries-around-the-world.html" />
  <meta property="og:description" content="I was testing d3js, GEOjson and some javascript code which I found interesting and wanted to share" />
  
  

<style>
body{
    font-size:15px;
    padding:10px;
    text-rendering: optimizeLegibility;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.4;
    color: #363636;
}
article {
    margin: 0 auto;
    max-width:700px;
}
header{
  margin: 22px 0;
}
.footer {
  margin-top: 34px;
}
span.article-date {
  font-size: 14px;
  color: #636363;
}
.list {
  max-width: 480px;
  margin-top: 10px;
}
.date {
    padding-left:4px;
    font-size:14px;
    color: #bbb;
}

a {
  color: #0366d6;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}


h1,h2,h3,h4,h5,h6 { margin-bottom: 12px }
h1,h2,h3,h4,h5,h6,strong { color: #000 }
h1,h2,h3,h4,h5,h6,b,strong,th { font-weight: 600 }
h1 { font-size: 2.2em; margin-top: 0;}

img {
  border-radius:5px;
}

.centerImage {
  display: block;
  margin: 0 auto;
  max-width:500px;
}

hr { border: none; border-top: 1px solid #dbdbdb }
table {
    border-collapse: collapse;
    margin-bottom: 10px;
    width: 100%
}
td,th { padding: 6px}
table,th,td { border: 1px solid #dbdbdb  }

li {
    list-style-type: none;
    position: relative;    /* It is required for setting position to absolute in the next rule. */
}

code,
kbd {
    background: #efefef;
    color: #000;
    padding: 5px;
    border-radius: 6px
}

pre>code {
    padding: 10px;
    display: block;
    overflow-x: auto
}

  /* Highlighting BW */

pre.highlight { padding: 1em; font-size: 13px}
.highlight .hll { background-color: #ffffcc } 
.highlight  { background: #eee; border-radius:5px;} 
.highlight .c { font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { font-weight: bold } /* Keyword */
.highlight .ch { font-style: italic } /* Comment.Hashbang */
.highlight .cm { font-style: italic } /* Comment.Multiline */
.highlight .cpf { font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { font-style: italic } /* Comment.Single */
.highlight .cs { font-style: italic } /* Comment.Special */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gh { font-weight: bold } /* Generic.Heading */
.highlight .gp { font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { font-weight: bold } /* Generic.Subheading */
.highlight .kc { font-weight: bold } /* Keyword.Constant */
.highlight .kd { font-weight: bold } /* Keyword.Declaration */
.highlight .kn { font-weight: bold } /* Keyword.Namespace */
.highlight .kr { font-weight: bold } /* Keyword.Reserved */
.highlight .s { font-style: italic } /* Literal.String */
.highlight .nc { font-weight: bold } /* Name.Class */
.highlight .ni { font-weight: bold } /* Name.Entity */
.highlight .ne { font-weight: bold } /* Name.Exception */
.highlight .nn { font-weight: normal } /* Name.Namespace JP:from bold*/
.highlight .nt { font-weight: bold } /* Name.Tag */
.highlight .ow { font-weight: bold } /* Operator.Word */
.highlight .sa { font-style: italic } /* Literal.String.Affix */
.highlight .sb { font-style: italic } /* Literal.String.Backtick */
.highlight .sc { font-style: italic } /* Literal.String.Char */
.highlight .dl { font-style: italic } /* Literal.String.Delimiter */
.highlight .sd { font-style: italic } /* Literal.String.Doc */
.highlight .s2 { font-style: italic } /* Literal.String.Double */
.highlight .se { font-weight: bold; font-style: italic } /* Literal.String.Escape */
.highlight .sh { font-style: italic } /* Literal.String.Heredoc */
.highlight .si { font-weight: bold; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { font-style: italic } /* Literal.String.Other */
.highlight .sr { font-style: italic } /* Literal.String.Regex */
.highlight .s1 { font-style: italic } /* Literal.String.Single */
.highlight .ss { font-style: italic } /* Literal.String.Symbol */

  
  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129008588-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129008588-1');
  </script>

</head>
<article>
    <header>
      <a href="/">
<img width=64 heihgt=64 src="data:image/png;base64,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"></a>
</header>

    <h1 style="margin-bottom: 0">Oil Refineries Around The World</h1>

<span class="article-date" style="margin-bottom: 30px;">2018-11
</span>

<style>
#content .map path {
  fill: #ddd;
  stroke: #aaa;
}

#content circle {
	fill: rgba(0,0,0,0.4);
}

div.tooltip {
  color: white;
  position: absolute;
  text-align: center;
  width: 100px;
  height: 60px;
  padding: 2px;
  font: 12px sans-serif;
  background: rgba(0,0,0,.8);
  border: 1px solid black;
  pointer-events: none;
}

</style>

<body>
  <div id="content">
    <svg width="800px" height="400px">
      <g class="map"></g>
    </svg>
  </div>

  <p>source: <a href="https://en.wikipedia.org/wiki/List_of_oil_refineries">Wikipedia: List of oil refineries</a></p>

  <p>I was testing d3js, GEOjson and some javascript code which I found interesting and wanted to share.</p>

  <p>Oil refineries are the backbone of the world economy, most of our energy generated is from fossil fuels and refineries play an essential role. Currently there are about 660 of them</p>

  <p>In the chart above I have shown the 10 largest refineries. The largest is in India called the Jamnagar Refinery. It has the capacity of refining 1,240,000 barrels of crude oil per day.</p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>

  <script>
var geojson = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "Africa"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[-6, 36], [33, 30], [43, 11], [51, 12], [29, -33], [18, -35], [7, 5], [-17, 14], [-6, 36]]]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Australia"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[143, -11], [153, -28], [144, -38], [131, -31], [116, -35], [114, -22], [136, -12], [140, -17], [143, -11]]]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Timbuktu"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-3.0026, 16.7666]
      }
    }
  ]
};

var refineries = [
	{"name": "Jamnager Refinery", "location": "Jamnagar, Gujarat, India", "production" : 1240000, "coordinates": [69.52, 22.20]},
	{"name": "Paraguana Refinery", "location": "Punto Fijo, FalcÃ³n, Venezuela", "production" : 940000, "coordinates": [-70.11, 11.44]},
	{"name": "SK Energy Ulsan Refinery", "location": "Ulsan, South Korea", "production" : 850000, "coordinates": [129.34, 35.43]},
	{"name": "Ruwais Refinery", "location": "Ruwais, UAE", "production" :  	817000, "coordinates": [52.72, 24.12]},
	{"name": "Yeosu Refinery", "location": "Yeosu, South Jeolla, South Korea", "production": 730000, "coordinates": [127.75, 34.72]},
	{"name": "Onsan Refinery", "location": "Ulsan, South Korea", "production":  669000, "coordinates": [129.34, 35.44]},
	{"name": "Jurong Island Refinery", "location": "Jurong Island, Singapore", "production":  605000, "coordinates": [103.70, 1.27]},
	{"name": "Port Arthur Refinery", "location": "Port Arthur, Texas, United States", "production":  603000, "coordinates": [-93.57, 29.53]},
	{"name": "Galveston Bay Refinery", "location": "Texas City, Texas, United States", "production":  571000, "coordinates": [-94.91, 29.40]},
	{"name": "Baytown Refinery", "location": "Baytown, Texas, United States", "production":  560500, "coordinates": [-95.01, 29.74]},
	{"name": "Garyville Refinery", "location": "Garyville, Louisiana, United States", "production": 556000 , "coordinates": [-90.36,30.03]},
	{"name": "Ras Tanura Refinery", "location": "Ras Tanura, Saudi Arabia", "production": 550000 , "coordinates": [50.10,26.39]},
	{"name": " 	Baton Rouge Refinery", "location": "Baton Rouge, Louisiana, United States", "production": 502500, "coordinates": [-91.10,30.29]},
	{"name": "Shell Pulau Bukom Refinery", "location": "Bukom Island, Singapore", "production":  500000, "coordinates": [103.45,1.14]},
	{"name": "Abadan Refinery", "location": "Abadan, Iran", "production": 450000 , "coordinates": [48.18,30.20]},

]




d3.json('/assets/maps/ne_110m_land.json', function(err, json) {
  createMap(json);
})

createMap = (geojson) => {

	var projection = d3.geoMercator()
	  .fitSize([722, 400], geojson)
	 
	var geoGenerator = d3.geoPath()
	  .projection(projection);

	function update(geojson) {
	  var u = d3.select('#content g.map')
	    .selectAll('path')
	    .data(geojson.features);

	  u.enter()
	    .append('path')
	    .attr('d', geoGenerator);
		
	  svg = d3.select("svg");

	  console.log(svg)

    // Define the div for the tooltip
    const div = d3
      .select('body')
      .append('div')
      .attr('class', 'tooltip')
      .style('opacity', 0);

    handleMouseOver = (d, i) => {
      div
        .transition()
        .duration(200)
        .style('opacity', 0.9);
      div
        .html(d.name + ' - ' + (d.production).toLocaleString('en') + ' barrels per day')
        .style('left', d3.event.pageX + 10 + 'px')
        .style('top', d3.event.pageY - 28 + 'px');

    }

    handleMouseOut = (d, i) => {
      div
            .transition()
            .duration(500)
            .style('opacity', 0);
    }
        
	  svg.append("g")
	  		.attr("class", "bubble")
	  	.selectAll("circle")
	  		.data(refineries)
	  	.enter().append("circle")
	  		.attr("transform", d => "translate(" + projection(d.coordinates) + ")")
	  		.attr("r", d => Math.sqrt(d.production/10000))
        .on('mouseover', handleMouseOver)
        .on('mouseout', handleMouseOut);

 
	}

	update(geojson);

}

  </script>
</body>



<div class="footer">

<p>My name is <b>James Pucula</b>, I'm working towards becoming an energy engineer while learning more about programming and economics</p>

<span>
  <a href="https://github.com/lazydancer">Github</a>
  <a style="margin-left: 7px;" href="feed.xml" type="application/rss+xml">RSS</a> 
</span>

</div>

</article>

</html>
