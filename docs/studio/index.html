<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

  <title>James Pucula - Studio</title>

  <style>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');</style>
  <link rel = "stylesheet" type="text/css" href="/style.css"/>

</head>
<body>
  <header>
        <a href="/">
  <img width="64" height="64" src="/finch_128.png"></a>
  </header>

  <main>
<h1>Studio</h1>
<div class="project-links">
    <a class="github-icon" href="https://github.com/lazydancer/studio" aria-label="View Studio on GitHub">
        <svg aria-hidden="true" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38C13.71 14.53 16 11.54 16 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
        <span>GitHub</span>
    </a>
</div>

<p>Studio converts markdown file to organized html pages - having the flexibility to change templates and adding custom css and javascript. With static webpages - your site is fast, secure and easy to deploy</p>

<p>I built this program during summer 2014. The purpose of this program was to improve my Haskell knowledge and to start posting online. I tried other static site generators but found they didn't meet my needs</p>

<p>At the time, I was having fun doing code golf, so I set a goal to create a static-site generator in 100 lines of Haskell. I reached my goal, sacrificing all of the readability. I later corrected that, adding spaces and expanding the equations.</p>

<p>.md text files are the inputs to studio. I used markdown which is a standard so you can add titles, links and images. We take the titles in the text files and create a table of contents for a main page, generating a link for each article.</p>

<p>Haskell is a functional language, I had to divide the functional vs the unfunctional real world. It is also a dense language, you can do a lot of modifications in a few lines of code compared to other languages. We divide this program into 3 steps</p>

<p>I made a data structure called Page which has the file path and date.</p>

<code>data Page = Page { title :: FilePath    -- Path to words
        , static  :: [FilePath]  -- List of static files 
    , date    :: [String]    -- Month,day,year
   } deriving (Show)
</code>

<h3 id="create-and-order-pages">Create and order pages</h3>

<p>Each folder in a directory is added to a list and sent to the getPages function, this returns an IO with the pages seen inside. GetStatic file creates a list of extra js or css files linked to the article. This offered some flexibility to have custom assets for an article</p>

<code>getPages :: [FilePath] -&gt; IO [Page]
getPages = mapM (\x -&gt; do static &lt;- getStatic ("Articles/" ++ x)
                      date &lt;- getPageDate ("Articles/" ++ x ++ "/words.md")
                      return (Page x static date))
</code>

<h3 id="create-html-from-template-and-pages">Create html from template and pages</h3>

<p>To write a page required a template in the form of a HTML and a Page from above. Pandoc library converted the markdown text files to HTML</p>

<code>writePage :: String -&gt; Page -&gt; IO ()
writePage template page = do
    let year = last $ date page  

    let urlTitle = urlConvert (title page)
    mdArt &lt;- readFile ("Articles/" ++ urlTitle ++ "/words.md")
    let pandocArt = readMarkdown def mdArt
    let html = writeHtmlString (siteOptions template) pandocArt
    createDirectoryIfMissing True $ "Output/" ++ year ++ "/" ++ urlTitle 
    writeFile ("Output/" ++ year ++ "/" ++ urlTitle ++ "/index.html") html
</code>

<h3 id="write-table-of-contentsh2">Write table of contents</h3>

<p>The table of contents also use the template but also include some html to make it look pretty</p>

<code>writeTOC :: String -&gt; [Page] -&gt; IO ()
writeTOC template pages = do
    list &lt;- mapM getItem pages 
    let html = writeHtmlString (siteOptions template) (tocWrap list) 
    createDirectoryIfMissing True $ "Output/archives" 
    writeFile "Output/archives/index.html" html 
</code>

<p>That is most likely 80% of the functions of the studio. With most other things being moving files around. Thank you for reading. You can find the code <a href="https://github.com/lazydancer/studio">here</a></p>
  </main>
  </body>
</html>
